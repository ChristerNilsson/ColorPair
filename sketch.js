// Generated by CoffeeScript 1.11.1
var Game, game, mousePressed, setup, xdraw;

game = 0;

Game = (function() {
  function Game(width1, height1) {
    this.width = width1;
    this.height = height1;
    this.level = 1;
    this.init(0);
    this.start = Date.now();
    this.stopp = Date.now();
  }

  Game.prototype.init = function(dlevel) {
    this.level += dlevel;
    this.level = constrain(this.level, 1, 64);
    this.circles = [];
    this.marked = null;
    this.select_colors();
    return this.stopp = Date.now();
  };

  Game.prototype.select_colors = function() {
    var b, col, colors, g, i, index, j, k, l, len, len1, len2, len3, m, n, o, p, r, radius, ref, ref1, ref2, ref3, results;
    if (this.level <= 27) {
      n = 2;
    } else {
      n = 4;
    }
    radius = width / (2 + this.level);
    colors = [];
    ref = range(n);
    for (l = 0, len = ref.length; l < len; l++) {
      i = ref[l];
      ref1 = range(n);
      for (m = 0, len1 = ref1.length; m < len1; m++) {
        j = ref1[m];
        ref2 = range(n);
        for (o = 0, len2 = ref2.length; o < len2; o++) {
          k = ref2[o];
          r = int(255 * (i + 0.5) / n);
          g = int(255 * (j + 0.5) / n);
          b = int(255 * (k + 0.5) / n);
          colors.push(color(r, g, b, 128));
        }
      }
    }
    print(colors);
    ref3 = range(this.level);
    results = [];
    for (p = 0, len3 = ref3.length; p < len3; p++) {
      i = ref3[p];
      index = int(random(0, colors.length - 1));
      col = colors[index];
      colors.splice(index, 1);
      this.circles.push(new Circle(col, radius, this.circles));
      results.push(this.circles.push(new Circle(col, radius, this.circles)));
    }
    return results;
  };

  Game.prototype.mousePressed = function() {
    var c, cc, circle, count, i, index, l, len, n, ref;
    n = this.circles.length;
    count = 0;
    ref = this.circles;
    for (i = l = 0, len = ref.length; l < len; i = ++l) {
      c = ref[i];
      if (c.within(mouseX, mouseY)) {
        cc = c;
        index = i;
        count += 1;
      }
    }
    this.circles = (function() {
      var len1, m, ref1, results;
      ref1 = this.circles;
      results = [];
      for (i = m = 0, len1 = ref1.length; m < len1; i = ++m) {
        circle = ref1[i];
        if (i !== index) {
          results.push(circle);
        }
      }
      return results;
    }).call(this);
    if (count !== 1) {
      this.init(-1);
      return;
    }
    if (this.marked === null) {
      return this.marked = cc.col;
    } else if (cc.col === this.marked) {
      this.marked = null;
      if (this.circles.length === 0) {
        return this.init(1);
      }
    } else {
      return this.init(-1);
    }
  };

  return Game;

})();

setup = function() {
  createCanvas(windowWidth, windowHeight);
  game = new Game(windowWidth, windowHeight);
  textSize(24);
  textAlign(CENTER, CENTER);
  return xdraw();
};

xdraw = function() {
  var c, l, len, ref;
  background(0);
  ref = game.circles;
  for (l = 0, len = ref.length; l < len; l++) {
    c = ref[l];
    c.draw();
  }
  fill(255, 255, 255, 127);
  sc();
  sw(1);
  return text("Level " + game.level + " in " + (game.stopp - game.start) + " milliseconds", width / 2, height - 50);
};

mousePressed = function() {
  game.mousePressed();
  return xdraw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBQSxJQUFBLEdBQU87O0FBRUQ7RUFDUyxjQUFDLE1BQUQsRUFBUSxPQUFSO0lBQUMsSUFBQyxDQUFBLFFBQUQ7SUFBTyxJQUFDLENBQUEsU0FBRDtJQUNyQixJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFOO0lBQ0EsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLENBQUMsR0FBTCxDQUFBO0lBQ1QsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLENBQUMsR0FBTCxDQUFBO0VBSkk7O2lCQU1kLElBQUEsR0FBTyxTQUFDLE1BQUQ7SUFDTixJQUFDLENBQUEsS0FBRCxJQUFVO0lBQ1YsSUFBQyxDQUFBLEtBQUQsR0FBUyxTQUFBLENBQVUsSUFBQyxDQUFBLEtBQVgsRUFBaUIsQ0FBakIsRUFBbUIsRUFBbkI7SUFDVCxJQUFDLENBQUEsT0FBRCxHQUFXO0lBQ1gsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUNWLElBQUMsQ0FBQSxhQUFELENBQUE7V0FDQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksQ0FBQyxHQUFMLENBQUE7RUFOSDs7aUJBUVAsYUFBQSxHQUFnQixTQUFBO0FBQ2YsUUFBQTtJQUFBLElBQUcsSUFBQyxDQUFBLEtBQUQsSUFBVSxFQUFiO01BQ0MsQ0FBQSxHQUFFLEVBREg7S0FBQSxNQUFBO01BR0MsQ0FBQSxHQUFFLEVBSEg7O0lBSUEsTUFBQSxHQUFTLEtBQUEsR0FBTSxDQUFDLENBQUEsR0FBRSxJQUFDLENBQUEsS0FBSjtJQUNmLE1BQUEsR0FBUztBQUNUO0FBQUEsU0FBQSxxQ0FBQTs7QUFDQztBQUFBLFdBQUEsd0NBQUE7O0FBQ0M7QUFBQSxhQUFBLHdDQUFBOztVQUNDLENBQUEsR0FBSSxHQUFBLENBQUksR0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFFLEdBQUgsQ0FBSixHQUFZLENBQWhCO1VBQ0osQ0FBQSxHQUFJLEdBQUEsQ0FBSSxHQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUUsR0FBSCxDQUFKLEdBQVksQ0FBaEI7VUFDSixDQUFBLEdBQUksR0FBQSxDQUFJLEdBQUEsR0FBSSxDQUFDLENBQUEsR0FBRSxHQUFILENBQUosR0FBWSxDQUFoQjtVQUNKLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBQSxDQUFNLENBQU4sRUFBUSxDQUFSLEVBQVUsQ0FBVixFQUFZLEdBQVosQ0FBWjtBQUpEO0FBREQ7QUFERDtJQU9BLEtBQUEsQ0FBTSxNQUFOO0FBQ0E7QUFBQTtTQUFBLHdDQUFBOztNQUNDLEtBQUEsR0FBUSxHQUFBLENBQUksTUFBQSxDQUFPLENBQVAsRUFBUyxNQUFNLENBQUMsTUFBUCxHQUFjLENBQXZCLENBQUo7TUFDUixHQUFBLEdBQU0sTUFBTyxDQUFBLEtBQUE7TUFDYixNQUFNLENBQUMsTUFBUCxDQUFjLEtBQWQsRUFBb0IsQ0FBcEI7TUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBa0IsSUFBQSxNQUFBLENBQU8sR0FBUCxFQUFXLE1BQVgsRUFBa0IsSUFBQyxDQUFBLE9BQW5CLENBQWxCO21CQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFrQixJQUFBLE1BQUEsQ0FBTyxHQUFQLEVBQVcsTUFBWCxFQUFrQixJQUFDLENBQUEsT0FBbkIsQ0FBbEI7QUFMRDs7RUFmZTs7aUJBc0JoQixZQUFBLEdBQWUsU0FBQTtBQUdkLFFBQUE7SUFBQSxDQUFBLEdBQUksSUFBQyxDQUFBLE9BQU8sQ0FBQztJQUNiLEtBQUEsR0FBUTtBQUNSO0FBQUEsU0FBQSw2Q0FBQTs7TUFDQyxJQUFHLENBQUMsQ0FBQyxNQUFGLENBQVMsTUFBVCxFQUFnQixNQUFoQixDQUFIO1FBQ0MsRUFBQSxHQUFLO1FBQ0wsS0FBQSxHQUFRO1FBQ1IsS0FBQSxJQUFTLEVBSFY7O0FBREQ7SUFNQSxJQUFDLENBQUEsT0FBRDs7QUFBWTtBQUFBO1dBQUEsZ0RBQUE7O1lBQXFDLENBQUEsS0FBSzt1QkFBMUM7O0FBQUE7OztJQUNaLElBQUcsS0FBQSxLQUFTLENBQVo7TUFDQyxJQUFDLENBQUEsSUFBRCxDQUFNLENBQUMsQ0FBUDtBQUNBLGFBRkQ7O0lBSUEsSUFBRyxJQUFDLENBQUEsTUFBRCxLQUFXLElBQWQ7YUFDQyxJQUFDLENBQUEsTUFBRCxHQUFVLEVBQUUsQ0FBQyxJQURkO0tBQUEsTUFFSyxJQUFHLEVBQUUsQ0FBQyxHQUFILEtBQVUsSUFBQyxDQUFBLE1BQWQ7TUFDSixJQUFDLENBQUEsTUFBRCxHQUFVO01BQ1YsSUFBRyxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsS0FBbUIsQ0FBdEI7ZUFDQyxJQUFDLENBQUEsSUFBRCxDQUFNLENBQU4sRUFERDtPQUZJO0tBQUEsTUFBQTthQUtKLElBQUMsQ0FBQSxJQUFELENBQU0sQ0FBQyxDQUFQLEVBTEk7O0VBbEJTOzs7Ozs7QUF5QmhCLEtBQUEsR0FBUSxTQUFBO0VBQ1AsWUFBQSxDQUFhLFdBQWIsRUFBeUIsWUFBekI7RUFDQSxJQUFBLEdBQVcsSUFBQSxJQUFBLENBQUssV0FBTCxFQUFpQixZQUFqQjtFQUNYLFFBQUEsQ0FBUyxFQUFUO0VBQ0EsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7U0FDQSxLQUFBLENBQUE7QUFMTzs7QUFPUixLQUFBLEdBQVEsU0FBQTtBQUNQLE1BQUE7RUFBQSxVQUFBLENBQVcsQ0FBWDtBQUNBO0FBQUEsT0FBQSxxQ0FBQTs7SUFDQyxDQUFDLENBQUMsSUFBRixDQUFBO0FBREQ7RUFFQSxJQUFBLENBQUssR0FBTCxFQUFTLEdBQVQsRUFBYSxHQUFiLEVBQWlCLEdBQWpCO0VBQ0EsRUFBQSxDQUFBO0VBQ0EsRUFBQSxDQUFHLENBQUg7U0FDQSxJQUFBLENBQUssUUFBQSxHQUFTLElBQUksQ0FBQyxLQUFkLEdBQW9CLE1BQXBCLEdBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUwsR0FBVyxJQUFJLENBQUMsS0FBakIsQ0FBekIsR0FBZ0QsZUFBckQsRUFBcUUsS0FBQSxHQUFNLENBQTNFLEVBQThFLE1BQUEsR0FBTyxFQUFyRjtBQVBPOztBQVNSLFlBQUEsR0FBZSxTQUFBO0VBQ2QsSUFBSSxDQUFDLFlBQUwsQ0FBQTtTQUNBLEtBQUEsQ0FBQTtBQUZjIiwic291cmNlc0NvbnRlbnQiOlsiZ2FtZSA9IDAgXHJcblxyXG5jbGFzcyBHYW1lXHJcblx0Y29uc3RydWN0b3IgOiAoQHdpZHRoLEBoZWlnaHQpIC0+XHJcblx0XHRAbGV2ZWwgPSAxXHJcblx0XHRAaW5pdCAwXHJcblx0XHRAc3RhcnQgPSBEYXRlLm5vdygpXHJcblx0XHRAc3RvcHAgPSBEYXRlLm5vdygpXHJcblxyXG5cdGluaXQgOiAoZGxldmVsKSAtPlxyXG5cdFx0QGxldmVsICs9IGRsZXZlbFxyXG5cdFx0QGxldmVsID0gY29uc3RyYWluIEBsZXZlbCwxLDY0XHJcblx0XHRAY2lyY2xlcyA9IFtdXHJcblx0XHRAbWFya2VkID0gbnVsbCAjIE1hcmtlZCBDaXJjbGVcclxuXHRcdEBzZWxlY3RfY29sb3JzKClcclxuXHRcdEBzdG9wcCA9IERhdGUubm93KClcclxuXHRcdFx0XHJcblx0c2VsZWN0X2NvbG9ycyA6IC0+XHJcblx0XHRpZiBAbGV2ZWwgPD0gMjdcclxuXHRcdFx0bj0yXHJcblx0XHRlbHNlXHJcblx0XHRcdG49NFxyXG5cdFx0cmFkaXVzID0gd2lkdGgvKDIrQGxldmVsKVxyXG5cdFx0Y29sb3JzID0gW11cclxuXHRcdGZvciBpIGluIHJhbmdlIG5cclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgblxyXG5cdFx0XHRcdGZvciBrIGluIHJhbmdlIG5cclxuXHRcdFx0XHRcdHIgPSBpbnQgMjU1KihpKzAuNSkvblxyXG5cdFx0XHRcdFx0ZyA9IGludCAyNTUqKGorMC41KS9uXHJcblx0XHRcdFx0XHRiID0gaW50IDI1NSooayswLjUpL25cclxuXHRcdFx0XHRcdGNvbG9ycy5wdXNoIGNvbG9yIHIsZyxiLDEyOFxyXG5cdFx0cHJpbnQgY29sb3JzXHJcblx0XHRmb3IgaSBpbiByYW5nZSBAbGV2ZWxcclxuXHRcdFx0aW5kZXggPSBpbnQgcmFuZG9tIDAsY29sb3JzLmxlbmd0aC0xXHJcblx0XHRcdGNvbCA9IGNvbG9yc1tpbmRleF1cclxuXHRcdFx0Y29sb3JzLnNwbGljZSBpbmRleCwxXHJcblx0XHRcdEBjaXJjbGVzLnB1c2ggbmV3IENpcmNsZShjb2wscmFkaXVzLEBjaXJjbGVzKVxyXG5cdFx0XHRAY2lyY2xlcy5wdXNoIG5ldyBDaXJjbGUoY29sLHJhZGl1cyxAY2lyY2xlcylcclxuXHJcblx0bW91c2VQcmVzc2VkIDogLT5cclxuXHRcdCMgWW91IG11c3Qgb25seSBtYXJrIG9uZSBjaXJjbGVcclxuXHRcdCMgVGhlIHNlY29uZCBjaXJjbGUgbXVzdCBoYXZlIHRoZSBzYW1lIGNvbG9yIGFzIHRoZSBmaXJzdCBvbmUuXHJcblx0XHRuID0gQGNpcmNsZXMubGVuZ3RoXHJcblx0XHRjb3VudCA9IDAgXHJcblx0XHRmb3IgYyxpIGluIEBjaXJjbGVzXHJcblx0XHRcdGlmIGMud2l0aGluIG1vdXNlWCxtb3VzZVlcclxuXHRcdFx0XHRjYyA9IGMgXHJcblx0XHRcdFx0aW5kZXggPSBpXHRcdFxyXG5cdFx0XHRcdGNvdW50ICs9IDFcclxuXHJcblx0XHRAY2lyY2xlcyA9IChjaXJjbGUgZm9yIGNpcmNsZSxpIGluIEBjaXJjbGVzIHdoZW4gaSAhPSBpbmRleClcclxuXHRcdGlmIGNvdW50ICE9IDFcclxuXHRcdFx0QGluaXQgLTFcclxuXHRcdFx0cmV0dXJuXHJcblxyXG5cdFx0aWYgQG1hcmtlZCA9PSBudWxsXHJcblx0XHRcdEBtYXJrZWQgPSBjYy5jb2xcclxuXHRcdGVsc2UgaWYgY2MuY29sID09IEBtYXJrZWRcclxuXHRcdFx0QG1hcmtlZCA9IG51bGxcclxuXHRcdFx0aWYgQGNpcmNsZXMubGVuZ3RoID09IDAgXHJcblx0XHRcdFx0QGluaXQgMSAjIFdpblxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRAaW5pdCAtMSAjIExvc2VcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsd2luZG93SGVpZ2h0XHJcblx0Z2FtZSA9IG5ldyBHYW1lIHdpbmRvd1dpZHRoLHdpbmRvd0hlaWdodCBcclxuXHR0ZXh0U2l6ZSAyNFxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0eGRyYXcoKVxyXG5cdFx0XHRcdFx0XHJcbnhkcmF3ID0gLT5cclxuXHRiYWNrZ3JvdW5kIDBcclxuXHRmb3IgYyBpbiBnYW1lLmNpcmNsZXNcclxuXHRcdGMuZHJhdygpXHJcblx0ZmlsbCAyNTUsMjU1LDI1NSwxMjdcclxuXHRzYygpXHJcblx0c3cgMVxyXG5cdHRleHQgXCJMZXZlbCAje2dhbWUubGV2ZWx9IGluICN7Z2FtZS5zdG9wcC1nYW1lLnN0YXJ0fSBtaWxsaXNlY29uZHNcIiwgd2lkdGgvMiwgaGVpZ2h0LTUwXHJcblxyXG5tb3VzZVByZXNzZWQgPSAtPlxyXG5cdGdhbWUubW91c2VQcmVzc2VkKClcclxuXHR4ZHJhdygpIl19
//# sourceURL=C:\github\ColorPair\sketch.coffee