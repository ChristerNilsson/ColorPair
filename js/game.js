// Generated by CoffeeScript 1.12.7
var Game;

Game = (function() {
  function Game(width1, height) {
    this.width = width1;
    this.height = height;
    this.level = 1;
    this.ring = true;
    this.stopp = Date.now();
    this.init(0);
  }

  Game.prototype.init = function(dlevel) {
    this.start = this.stopp;
    this.stopp = Date.now();
    this.level += dlevel;
    this.level = constrain(this.level, 1, 64);
    this.circles = [];
    this.marked = null;
    return this.select_colors();
  };

  Game.prototype.select_colors = function() {
    var b, col, colors, g, i, index, j, k, l, len, len1, len2, len3, m, n, o, p, r, radius, ref, ref1, ref2, ref3, results;
    n = 4;
    if (this.level < 3 * 3 * 3) {
      n = 3;
    }
    if (this.level < 2 * 2 * 2) {
      n = 2;
    }
    radius = width / (0.7 + this.level);
    colors = [];
    ref = range(n);
    for (l = 0, len = ref.length; l < len; l++) {
      i = ref[l];
      ref1 = range(n);
      for (m = 0, len1 = ref1.length; m < len1; m++) {
        j = ref1[m];
        ref2 = range(n);
        for (o = 0, len2 = ref2.length; o < len2; o++) {
          k = ref2[o];
          r = int(255 * i / (n - 1));
          g = int(255 * j / (n - 1));
          b = int(255 * k / (n - 1));
          if (i + j + k > 0) {
            colors.push(color(r, g, b, 127.5));
          }
        }
      }
    }
    ref3 = range(this.level);
    results = [];
    for (p = 0, len3 = ref3.length; p < len3; p++) {
      i = ref3[p];
      index = int(random(0, colors.length - 1));
      col = colors[index];
      colors.splice(index, 1);
      this.circles.push(new Circle(col, radius, this.circles));
      results.push(this.circles.push(new Circle(col, radius, this.circles)));
    }
    return results;
  };

  Game.prototype.mousePressed = function() {
    var c, cc, circle, count, i, index, l, len, n, ref;
    n = this.circles.length;
    count = 0;
    ref = this.circles;
    for (i = l = 0, len = ref.length; l < len; i = ++l) {
      c = ref[i];
      if (c.within(mouseX, mouseY)) {
        cc = c;
        index = i;
        count += 1;
      }
    }
    this.circles = (function() {
      var len1, m, ref1, results;
      ref1 = this.circles;
      results = [];
      for (i = m = 0, len1 = ref1.length; m < len1; i = ++m) {
        circle = ref1[i];
        if (i !== index) {
          results.push(circle);
        }
      }
      return results;
    }).call(this);
    if (count !== 1) {
      this.init(-1);
      return;
    }
    if (this.marked === null) {
      return this.marked = cc.col;
    } else if (cc.col === this.marked) {
      this.marked = null;
      if (this.circles.length === 0) {
        return this.init(1);
      }
    } else {
      return this.init(-1);
    }
  };

  return Game;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnYW1lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBTTtFQUNTLGNBQUMsTUFBRCxFQUFRLE1BQVI7SUFBQyxJQUFDLENBQUEsUUFBRDtJQUFPLElBQUMsQ0FBQSxTQUFEO0lBQ3JCLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFDVCxJQUFDLENBQUEsSUFBRCxHQUFRO0lBQ1IsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLENBQUMsR0FBTCxDQUFBO0lBQ1QsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFOO0VBSmE7O2lCQU1kLElBQUEsR0FBTyxTQUFDLE1BQUQ7SUFDTixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQTtJQUNWLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxDQUFDLEdBQUwsQ0FBQTtJQUNULElBQUMsQ0FBQSxLQUFELElBQVU7SUFDVixJQUFDLENBQUEsS0FBRCxHQUFTLFNBQUEsQ0FBVSxJQUFDLENBQUEsS0FBWCxFQUFpQixDQUFqQixFQUFtQixFQUFuQjtJQUNULElBQUMsQ0FBQSxPQUFELEdBQVc7SUFDWCxJQUFDLENBQUEsTUFBRCxHQUFVO1dBQ1YsSUFBQyxDQUFBLGFBQUQsQ0FBQTtFQVBNOztpQkFTUCxhQUFBLEdBQWdCLFNBQUE7QUFDZixRQUFBO0lBQUEsQ0FBQSxHQUFFO0lBQ0YsSUFBRyxJQUFDLENBQUEsS0FBRCxHQUFTLENBQUEsR0FBRSxDQUFGLEdBQUksQ0FBaEI7TUFBdUIsQ0FBQSxHQUFFLEVBQXpCOztJQUNBLElBQUcsSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFBLEdBQUUsQ0FBRixHQUFJLENBQWhCO01BQXVCLENBQUEsR0FBRSxFQUF6Qjs7SUFDQSxNQUFBLEdBQVMsS0FBQSxHQUFNLENBQUMsR0FBQSxHQUFJLElBQUMsQ0FBQSxLQUFOO0lBQ2YsTUFBQSxHQUFTO0FBQ1Q7QUFBQSxTQUFBLHFDQUFBOztBQUNDO0FBQUEsV0FBQSx3Q0FBQTs7QUFDQztBQUFBLGFBQUEsd0NBQUE7O1VBQ0MsQ0FBQSxHQUFJLEdBQUEsQ0FBSSxHQUFBLEdBQUksQ0FBSixHQUFNLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBVjtVQUNKLENBQUEsR0FBSSxHQUFBLENBQUksR0FBQSxHQUFJLENBQUosR0FBTSxDQUFDLENBQUEsR0FBRSxDQUFILENBQVY7VUFDSixDQUFBLEdBQUksR0FBQSxDQUFJLEdBQUEsR0FBSSxDQUFKLEdBQU0sQ0FBQyxDQUFBLEdBQUUsQ0FBSCxDQUFWO1VBQ0osSUFBRyxDQUFBLEdBQUUsQ0FBRixHQUFJLENBQUosR0FBTSxDQUFUO1lBQWdCLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBQSxDQUFNLENBQU4sRUFBUSxDQUFSLEVBQVUsQ0FBVixFQUFZLEtBQVosQ0FBWixFQUFoQjs7QUFKRDtBQUREO0FBREQ7QUFPQTtBQUFBO1NBQUEsd0NBQUE7O01BQ0MsS0FBQSxHQUFRLEdBQUEsQ0FBSSxNQUFBLENBQU8sQ0FBUCxFQUFTLE1BQU0sQ0FBQyxNQUFQLEdBQWMsQ0FBdkIsQ0FBSjtNQUNSLEdBQUEsR0FBTSxNQUFPLENBQUEsS0FBQTtNQUNiLE1BQU0sQ0FBQyxNQUFQLENBQWMsS0FBZCxFQUFvQixDQUFwQjtNQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLElBQUksTUFBSixDQUFXLEdBQVgsRUFBZSxNQUFmLEVBQXNCLElBQUMsQ0FBQSxPQUF2QixDQUFkO21CQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLElBQUksTUFBSixDQUFXLEdBQVgsRUFBZSxNQUFmLEVBQXNCLElBQUMsQ0FBQSxPQUF2QixDQUFkO0FBTEQ7O0VBYmU7O2lCQW9CaEIsWUFBQSxHQUFlLFNBQUE7QUFHZCxRQUFBO0lBQUEsQ0FBQSxHQUFJLElBQUMsQ0FBQSxPQUFPLENBQUM7SUFDYixLQUFBLEdBQVE7QUFDUjtBQUFBLFNBQUEsNkNBQUE7O01BQ0MsSUFBRyxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsRUFBZ0IsTUFBaEIsQ0FBSDtRQUNDLEVBQUEsR0FBSztRQUNMLEtBQUEsR0FBUTtRQUNSLEtBQUEsSUFBUyxFQUhWOztBQUREO0lBTUEsSUFBQyxDQUFBLE9BQUQ7O0FBQVk7QUFBQTtXQUFBLGdEQUFBOztZQUFxQyxDQUFBLEtBQUs7dUJBQTFDOztBQUFBOzs7SUFDWixJQUFHLEtBQUEsS0FBUyxDQUFaO01BQ0MsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFDLENBQVA7QUFDQSxhQUZEOztJQUlBLElBQUcsSUFBQyxDQUFBLE1BQUQsS0FBVyxJQUFkO2FBQ0MsSUFBQyxDQUFBLE1BQUQsR0FBVSxFQUFFLENBQUMsSUFEZDtLQUFBLE1BRUssSUFBRyxFQUFFLENBQUMsR0FBSCxLQUFVLElBQUMsQ0FBQSxNQUFkO01BQ0osSUFBQyxDQUFBLE1BQUQsR0FBVTtNQUNWLElBQUcsSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULEtBQW1CLENBQXRCO2VBQ0MsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFOLEVBREQ7T0FGSTtLQUFBLE1BQUE7YUFLSixJQUFDLENBQUEsSUFBRCxDQUFNLENBQUMsQ0FBUCxFQUxJOztFQWxCUyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEdhbWVcclxuXHRjb25zdHJ1Y3RvciA6IChAd2lkdGgsQGhlaWdodCkgLT5cclxuXHRcdEBsZXZlbCA9IDFcclxuXHRcdEByaW5nID0gdHJ1ZVxyXG5cdFx0QHN0b3BwID0gRGF0ZS5ub3coKVxyXG5cdFx0QGluaXQgMFxyXG5cclxuXHRpbml0IDogKGRsZXZlbCkgLT5cclxuXHRcdEBzdGFydCA9IEBzdG9wcFxyXG5cdFx0QHN0b3BwID0gRGF0ZS5ub3coKVxyXG5cdFx0QGxldmVsICs9IGRsZXZlbFxyXG5cdFx0QGxldmVsID0gY29uc3RyYWluIEBsZXZlbCwxLDY0XHJcblx0XHRAY2lyY2xlcyA9IFtdXHJcblx0XHRAbWFya2VkID0gbnVsbCAjIE1hcmtlZCBDaXJjbGVcclxuXHRcdEBzZWxlY3RfY29sb3JzKClcclxuXHRcdFx0XHJcblx0c2VsZWN0X2NvbG9ycyA6IC0+XHJcblx0XHRuPTRcclxuXHRcdGlmIEBsZXZlbCA8IDMqMyozIHRoZW4gbj0zXHJcblx0XHRpZiBAbGV2ZWwgPCAyKjIqMiB0aGVuIG49MlxyXG5cdFx0cmFkaXVzID0gd2lkdGgvKDAuNytAbGV2ZWwpIFxyXG5cdFx0Y29sb3JzID0gW11cclxuXHRcdGZvciBpIGluIHJhbmdlIG5cclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgblxyXG5cdFx0XHRcdGZvciBrIGluIHJhbmdlIG5cclxuXHRcdFx0XHRcdHIgPSBpbnQgMjU1KmkvKG4tMSlcclxuXHRcdFx0XHRcdGcgPSBpbnQgMjU1KmovKG4tMSlcclxuXHRcdFx0XHRcdGIgPSBpbnQgMjU1KmsvKG4tMSlcclxuXHRcdFx0XHRcdGlmIGkraitrPjAgdGhlbiBjb2xvcnMucHVzaCBjb2xvciByLGcsYiwxMjcuNVxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgQGxldmVsXHJcblx0XHRcdGluZGV4ID0gaW50IHJhbmRvbSAwLGNvbG9ycy5sZW5ndGgtMVxyXG5cdFx0XHRjb2wgPSBjb2xvcnNbaW5kZXhdXHJcblx0XHRcdGNvbG9ycy5zcGxpY2UgaW5kZXgsMVxyXG5cdFx0XHRAY2lyY2xlcy5wdXNoIG5ldyBDaXJjbGUoY29sLHJhZGl1cyxAY2lyY2xlcylcclxuXHRcdFx0QGNpcmNsZXMucHVzaCBuZXcgQ2lyY2xlKGNvbCxyYWRpdXMsQGNpcmNsZXMpXHJcblxyXG5cdG1vdXNlUHJlc3NlZCA6IC0+XHJcblx0XHQjIFlvdSBtdXN0IG9ubHkgbWFyayBvbmUgY2lyY2xlXHJcblx0XHQjIFRoZSBzZWNvbmQgY2lyY2xlIG11c3QgaGF2ZSB0aGUgc2FtZSBjb2xvciBhcyB0aGUgZmlyc3Qgb25lLlxyXG5cdFx0biA9IEBjaXJjbGVzLmxlbmd0aFxyXG5cdFx0Y291bnQgPSAwIFxyXG5cdFx0Zm9yIGMsaSBpbiBAY2lyY2xlc1xyXG5cdFx0XHRpZiBjLndpdGhpbiBtb3VzZVgsbW91c2VZXHJcblx0XHRcdFx0Y2MgPSBjIFxyXG5cdFx0XHRcdGluZGV4ID0gaVx0XHRcclxuXHRcdFx0XHRjb3VudCArPSAxXHJcblxyXG5cdFx0QGNpcmNsZXMgPSAoY2lyY2xlIGZvciBjaXJjbGUsaSBpbiBAY2lyY2xlcyB3aGVuIGkgIT0gaW5kZXgpXHJcblx0XHRpZiBjb3VudCAhPSAxXHJcblx0XHRcdEBpbml0IC0xXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdGlmIEBtYXJrZWQgPT0gbnVsbFxyXG5cdFx0XHRAbWFya2VkID0gY2MuY29sXHJcblx0XHRlbHNlIGlmIGNjLmNvbCA9PSBAbWFya2VkXHJcblx0XHRcdEBtYXJrZWQgPSBudWxsXHJcblx0XHRcdGlmIEBjaXJjbGVzLmxlbmd0aCA9PSAwIFxyXG5cdFx0XHRcdEBpbml0IDEgIyBXaW5cclxuXHRcdGVsc2VcclxuXHRcdFx0QGluaXQgLTEgIyBMb3NlXHJcbiJdfQ==
//# sourceURL=C:\github\ColorPair\coffee\game.coffee